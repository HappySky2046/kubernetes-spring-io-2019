<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>Spring Cloud on Kubernetes</title>
        <meta name="description" content="Spring Cloud on Kubernetes">
        <meta name="author" content="Andreas Falk">

		<link rel="stylesheet" href="css/reset.css">
		<link rel="icon" href="images/cropped-novatec-favicon-32x32.png" sizes="32x32" />
        <link rel="icon" href="images/cropped-novatec-favicon-192x192.png" sizes="192x192" />


        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <link rel="stylesheet" href="css/reset.css">
        <link rel="stylesheet" href="css/reveal.css">
        <!--link rel="stylesheet" href="css/theme/novatec.css" id="theme"-->
        <link href="css/theme/spring_io.css" id="theme" rel="stylesheet">

        <!-- Theme used for syntax highlighting of code -->
        <link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>
	</head>
	<body>
		<div class="reveal">
			<div class="slides">

                <!-- Title, Speaker and Workshop Introduction -->
                <section>
                    <section data-background="images/title_image.png">
                        <h2 style="color: white">Spring Cloud on Kubernetes</h2>
                        <p style="color: white">Andreas Falk</p>
                        <p style="color: white">@andifalk</p>
                        <p style="color: white">
                            <small>
                            Slides: <a href="https://andifalk.github.io/kubernetes-spring-io-2019">https://andifalk.github.io/kubernetes-spring-io-2019</a><br>
                            Source-Code: <a href="git@github.com:andifalk/kubernetes-spring-io-2019.git">git@github.com:andifalk/kubernetes-spring-io-2019.git</a>
                            </small>
                        </p>
                    </section>
                    <section>
                        <img class="plain" src="images/andreas_falk.jpg" width="40%">
                        <h4>Andreas Falk</h4>
                        <p><strong>Novatec Consulting GmbH</strong></p>
                        <p><small>
                            <a href="https://www.novatec-gmbh.de/">https://www.novatec-gmbh.de</a><br>
                            andreas.falk@novatec-gmbh.de / @andifalk<br>
                        </small></p>
                        <p><img class="plain" src="images/novatec_logo_big.png" width="40%"></p>
                    </section>
                    <section>
                        <h3>Novatec Offices</h3>
                        <p>
                            <img class="plain" src="images/novatec_offices.png">
                        </p>
                    </section>
                    <section>
                        <h1>Spring Cloud on Kubernetes</h1>
                        <p>K8s 101</p>
                        <p>Config Maps</p>
                        <p>Secrets & Encryption</p>
                        <p>Discovery Client</p>
                        <p>K8s Best Practices for Spring/Java Devs</p>
                    </section>
                </section>

                <!-- Introduction into K8s -->
                <section>
                    <section data-background="images/title_image.png">
                        <h1 style="color: white">Kubernetes</h1>
                        <h2 style="color: white">101</h2>
                    </section>
                    <section>
                        <h2>Kubernetes Basics</h2>
                        <p>
                            <img src="images/kubernetes_basics.png" class="plain" width="100%">
                        </p>
                        <p>
                            <small>
                                By courtesy of Matthias Haeussler (@maeddes)
                            </small>
                        </p>
                    </section>
                    <section>
                        <h3>K8s Config Maps</h3>
                        <pre><code class="hljs yml" data-trim>
                                kind: ConfigMap
                                apiVersion: v1
                                metadata:
                                  name: hello-spring-cloud-kubernetes
                                  namespace: default
                                data:
                                  hello.message: k8s
                                  hello.prefix: Hi
                        </code></pre>
                        <pre><code class="hljs yml" data-trim>
                                ...
                                data:
                                  application.properties: |-
                                    hello.message=k8s
                                    hello.prefix=Hi
                        </code></pre>
                        <pre><code class="hljs yml" data-trim>
                                ...
                                data:
                                  application.yaml: |-
                                    hello:
                                      message: k8s
                                      prefix: Hi
                        </code></pre>
                    </section>
                    <section>
                        <h2>K8s Secrets</h2>
                        <pre><code class="hljs yml" data-trim>
                            apiVersion: v1
                            kind: Secret
                            metadata:
                              name: hello-spring-cloud-kubernetes
                              namespace: default
                            type: Opaque
                            data:
                              user.username: dXNlcg==
                              user.password: azhzX3VzZXI=
                              admin.username: YWRtaW4=
                              admin.password: azhzX2FkbWlu
                        </code></pre>
                    </section>
                    <section>
                        <h2>Secrets in Etcd</h2>
                    </section>
                    <section>
                        <h2>Azure FlexVolumes</h2>
                        <pre><code class="hljs yaml" data-trim>
                              ..
                              volumes:
                              - name: kv-volume-env
                                flexVolume:
                                  driver: "azure/kv"
                                  secretRef:
                                    name: kvcreds
                                  options:
                                    keyvaultobjectnames: "mysecret1;mysecret2"
                                    keyvaultobjecttypes: "secret;secret"
                                    keyvaultname: "my-keyvault"
                                    resourcegroup: "my-key-vault"
                                    ...
                                  readOnly: true
                        </code></pre>
                    </section>
                    <section>
                        <h2>Kubernetes KMS</h2>
                        <pre><code class="hljs yaml" data-trim>
                                apiVersion: apiserver.config.k8s.io/v1
                                kind: EncryptionConfiguration
                                resources:
                                  - resources:
                                    - secrets
                                    providers:
                                    - kms:
                                        name: myKmsPlugin
                                        endpoint: ...
                                        ...
                                    - identity: {}
                        </code></pre>
                        <p>Set the --encryption-provider-config flag on the kube-apiserver</p>
                    </section>
                </section>

                <!-- Config Maps -->
                <section>
                    <section data-background="images/title_image.png">
                        <h2 style="color: white">Spring Cloud Kubernetes</h2>
                    </section>
                    <section>
                        <p>DiscoveryClient for Kubernetes (with Ribbon Support)</p>
                        <p>ConfigMap PropertySource</p>
                        <p>Secrets PropertySource</p>
                        <p>Kubernetes Ecosystem Awareness</p>
                        <p>Kubernetes Profile</p>
                        <p>Pod Health Indicator</p>
                    </section>
                    <section>
                        <h2>Spring Cloud Kubernetes Starters</h2>
                        <p>org.springframework.cloud</p>
                        <table>
                            <thead>
                            <tr>
                                <th>Starter Dependency</th>
                                <th>Description</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <td>spring-cloud-starter-kubernetes</td>
                                <td>Discovery Client implementation that resolves service names to Kubernetes Services</td>
                            </tr>
                            <tr>
                                <td>spring-cloud-starter-kubernetes-config</td>
                                <td>(Re)Load application properties from Kubernetes ConfigMaps and Secrets</td>
                            </tr>
                            <tr>
                                <td>spring-cloud-starter-kubernetes-ribbon</td>
                                <td>Ribbon client-side load balancer with server list obtained from Kubernetes Endpoints</td>
                            </tr>
                            <tr>
                                <td>spring-cloud-starter-kubernetes-all</td>
                                <td>All Spring Cloud Kubernetes features.</td>
                            </tr>
                            </tbody>
                        </table>
                    </section>

                </section>

                <!-- Secrets -->
                <section>
                    <section data-background="images/title_image.png">
                        <h2 style="color: white">Spring Boot Secrets on K8s</h2>
                    </section>
                    <section>
                        <h2>Spring Boot</h2>
                        <h3>Sensitive data</h3>
                        <p>DB credentials, passwords, ...</p>
                    </section>
                </section>

                <!-- Security Best Practices -->
                <section>
                    <section data-background="images/title_image.png">
                        <h2 style="color: white">K8s Security Best Practices</h2>
                    </section>
                    <section>
                        <h2>Kubernetes Security</h2>
                        <img src="images/tweet_kubernetes_all_root.png" width="100%">
                    </section>
                    <section>
                        <h2>Kubernetes Security</h2>
                        <img src="images/alpine_docker_cve.png" class="plain" width="75%">
                    </section>
                    <section>
                        <h2>Say no to Root</h2>
                    </section>
                    <section>
                        <h3>Kubernetes Security</h3>
                        <img src="images/docker_images_vulnerabilities.png" class="plain" width="100%">
                    </section>
                    <section>
                        <h2>Scan your container images</h2>
                    </section>

                </section>

                <!-- The End -->
                <section>
                    <section data-background="images/title_image.png">
                        <h1 style="color: white">Q&A</h1>
                        <a href="https://www.novatec-gmbh.de/">https://www.novatec-gmbh.de</a></br>
                        <a href="https://blog.novatec-gmbh.de/">https://blog.novatec-gmbh.de</a><br>
                        <p style="color: white">andreas.falk@novatec-gmbh.de<br>
                        Twitter: @andifalk</p>
                    </section>
                </section>
			</div>
		</div>

		<script src="js/reveal.js"></script>

		<script>
			// More info about config & dependencies:
			// - https://github.com/hakimel/reveal.js#configuration
			// - https://github.com/hakimel/reveal.js#dependencies
			Reveal.initialize({
                hash: true,
                fragmentInURL: false,
                dependencies: [
					{ src: 'plugin/markdown/marked.js' },
					{ src: 'plugin/markdown/markdown.js' },
					{ src: 'plugin/notes/notes.js', async: true },
                    { src: 'plugin/zoom-js/zoom.js', async: true },
					{ src: 'plugin/highlight/highlight.js', async: true }
				]
			});
            Reveal.configure({
                slideNumber: 'c/t',
                pdfMaxPagesPerSlide: 1
            });
		</script>
	</body>
</html>
